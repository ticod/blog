---
title: HTTP vs HTTPS
date: "2020-12-06T21:03:00.000Z"
description: "HTTP vs HTTPS"
---

HTTP와 HTTPS의 차이점에 대해 정리했다. HTTP의 구체적인 내용에 대해서는 정리하지 않았다. 추후에 이에 대해서도 정리해 볼 생각이다. 또한 HTTPS에 대해 좀 더 깊게 공부하기 위해 HTTPS에서 사용되는 프로토콜인 TLS에 대해 조사하게 되었다.



## HTTP

---

> **H**yper**T**ext **T**ransfer **P**rotocol
>
> 클라이언트와 서버 간에 텍스트, 파일 등(= 리소스)을 전송하는 데 사용하는 Application 계층(OSI 7계층)의 프로토콜

### 특징

- 클라이언트 - 서버 프로토콜

    클라이언트 (보통 웹 브라우저) 에서 서버로 리소스를 요청, 서버에서 응답하는 형태

- **평문**으로 데이터를 주고 받음
- TCP 사용 (HTTP/3 에서는 UDP를 사용한다는 이야기도 있음)
- 포트: 80





## HTTPS

---

> **HTTP** + **S**ecure
>
> HTTP의 문제점인 평문으로 데이터를 주고 받는다는 보안 문제를 해결

### 특징

- HTTP에서 서버와 클라이언트 간 송수신되는 데이터를 **TLS** (**T**ransport **L**ayer **S**ecurity) 프로토콜을 통해 **암호화**한다.
- 포트: 443

통신 절차에 대해서는 TLS에 대해 먼저 설명하고, 아래에 작성했다.





## TLS

---

> **SSL** (**S**ecure **S**ocket **L**ayer) 프로토콜이 표준화되면서 바뀌게 된 이름으로, SSL 3.0 버전을 계승한다. 일반적으로 SSL이라는 용어를 많이 사용한다.

- 대칭키, 비대칭키 암호화 방식을 혼용한다.

    - 대칭 키: **동일한 키**로 암호화, 복호화가 가능한 방식

    - 비대칭 키: 암호화, 복호화 하는 키가 **다른 키**인 방식
        예를 들어, A키로 암호화 했다면 B키로만 복호화가 가능하고, B키로 암호화 했다면 A키로만 복호화가 가능한 방식이다.

        공개 키 암호 방식이라고도 하는데 (이 부분은 개인적으로 헷갈리는 것이 있는데, 비대칭키 방식에 공개 키 방식이 포함되는 것이 아닌가 싶은데 조사를 해보면 둘을 같은 암호화 방식으로 소개한다) 공개 키는 모두에게 알려지고, 개인 키는 개개인에게 주어진다. 공개 키를 통해 메세지를 암호화하면 개인 키를 가지고 복호화가 가능하다.

        이 공개 키 암호 방식의 중요한 점 중 하나가 **계산이 복잡하다**는 점이 있다. 이는 컴퓨터의 자원을 많이 사용한다. 그렇기 때문에, 계산이 간단한 대칭 키 방식과 공개 키 방식을 혼용하여 효율적인 통신을 하게 된다. **대칭 키를 공개 키 암호 방식으로 암호화하여 주고 받은 후, 이 대칭 키를 이용하여 통신하는 방식**이다.

        다양한 알고리즘이 있고, 대표적으로 RSA 방식이 있다.

- TCP/IP 네트워크를 사용하는 통신에 적용되어 HTTPS 이외에도, VoIP, e-mail 등 다양한 곳에서 사용된다.

### 기본 절차

1. 서로 지원 가능한 알고리즘을 교환 (암호화 방법 등)
2. 대칭 키 교환, 인증
3. 대칭 키 방식으로 암호화하여 메시지 인증 및 통신





## HTTPS의 통신 절차

---

> Handshake - Session - Session 종료 단계로 이루어진다.

### Handshake 단계

1. 클라이언트가 서버에 접속 후, 클라이언트 측에서 생성한 랜덤 데이터와 클라이언트에서 지원하는 암호화 방식, 세션 아이디를 전송한다.

    세션 아이디의 경우, 이미 handshake가 끝난 경우 비용, 시간을 절약하기 위해 기존의 세션을 재활용하게 되는데, 이 때 사용할 연결에 대한 아이디를 전송한다.

2. 서버에서는 서버 측에서 생성한 랜덤 데이터와 서버가 선택한 암호화 방식, 인증서를 전송한다.

3. 클라이언트에서 신뢰할 수 있는 인증서인지 CA 리스트를 통해 검증한다.

    1. 공개 키를 인증해 주는 민간 기업들이 있다. 이를 CA()라고 한다.
    2. CA의 목록은 브라우저에 내장되어 있다.
    3. CA의 인증을 받은 인증서는 해당 CA의 개인 키로 암호화가 되어 있다. 브라우저에 저장된 CA의 공개 키로 복호화가 가능해야 한다.

4. 1번에서 실어 보낸 무작위 데이터를 바탕으로 임시 키를 만들고, 이 임시 키를 서버의 공개 키로 암호화해서 전송 후, 서버에서는 개인 키를 통해 복호화한다.

5. 서버에서는 개인 키로 이를 암호화해서 보낸다면, 클라이언트 측에서는 서버의 공개 키를 통해 복호화가 가능하다. 이를 일련의 과정을 거쳐 대칭 키로 변환한다. 서버와 클라이언트 측에서는 동일한 대칭 키를 가지게 된다. (이 대칭 키를 session key라고 한다)

6. 이 후, 서버와 클라이언트는 대칭 키 방식으로 데이터를 주고 받고, handshake가 종료된다.

### Session 단계

서버와 클라이언트가 실제로 데이터를 주고 받는 단계로, 대칭 키 방식을 이용해 암호화/복호화 하여 통신한다.

### Session 종료

데이터의 전송이 끝나면 SSL 통신이 끝났음을 서로에게 알리고, 통신에서 사용한 대칭 키를 폐기한다.





## 결론

---

HTTP는 평문으로 데이터를 주고 받고, HTTPS는 TLS 프로토콜을 통해 암호화된 데이터를 주고 받는다. 여기서 TLS 프로토콜을 사용하는 점, 암호화된 데이터를 주고 받는다는 점에서 서버에 대한 부하가 커지고 속도가 느려진다. 이와 관련해서 재밌는 내용이 있는데 HTTP/2 버전의 경우 HTTPS만을 지원한다. 이 HTTPS의 경우 HTTP/1.1 보다 빠르다고 한다. (이에 대해 HTTPS가 HTTP보다 빠르다라고 말하기는 애매한 부분인 것 같다.. / 관련 링크: https://tech.ssut.me/https-is-faster-than-http/ , https://okky.kr/article/480266)

한 줄 요약하면, TLS 프로토콜 상에서 HTTP 통신을 하는 것이 HTTPS라고 정리할 수 있겠다.



### 참고 사이트

- https://geek-university.com/ccna/hypertext-transfer-protocol-http/
- https://geek-university.com/ccna/hypertext-transfer-protocol-secure-https/
- https://namu.wiki/w/TLS#s-1.3
- https://ko.wikipedia.org/wiki/%EC%A0%84%EC%86%A1_%EA%B3%84%EC%B8%B5_%EB%B3%B4%EC%95%88
- https://ko.wikipedia.org/wiki/%EA%B3%B5%EA%B0%9C_%ED%82%A4_%EC%95%94%ED%98%B8_%EB%B0%A9%EC%8B%9D
- https://12bme.tistory.com/80
- https://www.youtube.com/watch?v=H6lpFRpyl14
- https://www.youtube.com/watch?v=8R0FUF_t_zk